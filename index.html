<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Winter Card-Game</title>
    <link type="text/css" rel="stylesheet" href="style/style.css"/>
    
</head>
<body style="background-color: red;" id="bg">
    <div style="text-align: center; color: maroon;" id="tit">
        <p style="font-size: 48px">Winter Card-Game Version Alpha</p>
        <button id="start">开始对战</button>&nbsp;&nbsp;&nbsp;<button id="fstart">开始对战（魔鬼模式）</button>&nbsp;&nbsp;&nbsp;<button onclick="inform()">卡牌背景</button>
    </div>
    <img src="img/0.png" id="pictureb" height="100%" width="100%" style="position: absolute; top: 0px; z-index: 99999; display: none;">
    <img src="img/bruf.png" width="500" height="750" style="top: 250px; left: 50%;" id="pic">
    <img src="img/shanz.png" style="display: none; z-index: 3; position: absolute; left: -250px; top: -76px; transform: rotate(-30deg);" height="2000" width="2000" id="sz">
    <img src="img/0.png" id="big" height="600" width="360" style="position: absolute; left: 5px;">
    <div style="display: none;" id="sp">
        <div style="position: fixed; top: 15px; right: 40px;">
            <img src="img/0.png" id="e1" height="280" width="180">
            <img src="img/0.png" id="e2" height="280" width="180">
            <img src="img/0.png" id="e3" height="280" width="180">
            <img src="img/0.png" id="e4" height="280" width="180">
            <img src="img/0.png" id="e5" height="280" width="180">
            <img src="img/0.png" id="e6" height="280" width="180">
        </div>
        <div style="position: fixed; bottom: 15px;">
            <img src="img/0.png" id="c1" height="280" width="168" style="transition-property: all; transition-timing-function: ease; transition-duration: 0.5s;" onmouseover="show(1)" onmouseout="show(0)">&nbsp;
            <img src="img/0.png" id="c2" height="280" width="168" style="transition-property: all; transition-timing-function: ease; transition-duration: 0.5s;" onmouseover="show(2)" onmouseout="show(0)">&nbsp;
            <img src="img/0.png" id="c3" height="280" width="168" style="transition-property: all; transition-timing-function: ease; transition-duration: 0.5s;" onmouseover="show(3)" onmouseout="show(0)">&nbsp;
            <img src="img/0.png" id="c4" height="280" width="168" style="transition-property: all; transition-timing-function: ease; transition-duration: 0.5s;" onmouseover="show(4)" onmouseout="show(0)">&nbsp;
            <img src="img/0.png" id="c5" height="280" width="168" style="transition-property: all; transition-timing-function: ease; transition-duration: 0.5s;" onmouseover="show(5)" onmouseout="show(0)">&nbsp;
            <img src="img/0.png" id="c6" height="280" width="168" style="transition-property: all; transition-timing-function: ease; transition-duration: 0.5s;" onmouseover="show(6)" onmouseout="show(0)"><br><br>
            <img src="img/diamond.png" width="70" height="70">
            <div style="position: absolute; left: 68px; bottom: 9px;">
                <span style="font-size: 48px;">:<span id="d"></span></span>
                <button id="skip">skip</button>
            </div>
        </div>
        <div style="position: absolute; right: 10px; bottom: 10px;">
            <span style="font-size: 48px;">本回合对手的数值： +<span id="ea">0</span>+<span id="eb">0</span><br>本回合你的数值：+<span style="font-size: 48px;" id="a">0</span>+<span style="font-size: 48px;" id="b">0</span></span><br><span id="blarea"><span style="font-size: 48px;">你的血量：<span id="bl">10</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对方的血量：<span id="obl"></span></span></span>
        </div>
        <img class="sha" src="img/card-backn.png" height="280" width="180">
    </div>
    <button id="adra" style="display: none;">打我！</button>
    <audio src="" autoplay loop id="bgm" style="display: none;"></audio>
    <button id="sw" style="position: absolute; right: 10px; top: 10px; z-index: 555;">切换BGM播放状态</button>
    <script>
        var colors = ["aqua","orange","green","black"];
        document.getElementById('bg').style = "background-color: " + colors[Math.floor(Math.random() * 5)] + ";";
        var cardcost = [0,1,1,2,8,4,6,3,5,2,3,2,1,4,2,2,7,4,4,3,5,2,4,3,1];//卡牌消费
        var asum = 0,easum = 0;
        var bsum = 0,ebsum = 0;
        var pbl = 10;
        var kx = 1;
        var monk = 0;
        var ebl = 10;
        var clicks,k;
        var wm = 0,ewm = 0;
        var diamonds = 1,amt = 1,emt = 1; //diamonds最大钻石数，amt目前钻石数
        var pa = [0,1,1,4,8,3,4,3,1,2,5,3,1,1,4,1,12,3,1,2,3,3,3,1,1]; //卡牌提供的a
        var pb = [0,1,1,1,0,2,2,1,4,1,2,2,1,1,4,1,21,2,2,2,3,2,3,5,2]; //卡牌提供的b
        var stat = 0,cards = 24,pcard = 4,ecard = 4;//stat是信号，cards卡牌总数
        var names = ["","蜘蛛纸牌列兵","没有吃饱的刘仓","Yuzuru han-nyu","GDY is coming！！！","仓王","呼叫恶委","平行线不香蕉","装X master","文明观猴","深进，就是力量！","博学者爱因仓坦","wjk的冰雪溶液","引猴向上","摸鱼王","沈班长","觉醒吧！摸鱼时刻","CTJer们的总攻","愿风神忽悠你","2800","溜猴杰","刘猴猴","猴子们的集群攻击","怪盗基猴","猴子小兵"];
        var monkeys = [7,9,13,20,21,22,23,24],mnum = 8;
        var pcd = [0,0,0,0,0,0,0,0]; //player card
        var ecd = [0,0,0,0,0,0,0,0];
        var had = [2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];//记录重复
        var ehad = [2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
        had[16] = 2;
        had[15] = 1;
        ehad[16] = 2;
        ehad[15] = 1;
        ehad[24] = 2;
        had[24] = 2;
        var KKKsc03 = 0;
        var listsing = ["bgm.mp3",""];
        document.getElementById('adra').onclick = function () {
            clicks+=1;
        }
        function mempty(){
            for(var i = 0; i < mnum; i++) if(had[monkeys[i]] < 2) return false;
            return true;
        }
        document.getElementById('sw').onclick = function () {
            KKKsc03^=1;
            document.getElementById('bgm').src = listsing[KKKsc03 ^ 1];
        }
        function inform() {
            window.location.href = "inform.html";
        }
        function eins (i, n) {
            var cardback = "card-back";
            if(n == 0) cardback = "0";
            if(i == 1) document.getElementById('e1').src = "img/" + cardback + ".png";
            if(i == 2) document.getElementById('e2').src = "img/" + cardback + ".png";
            if(i == 3) document.getElementById('e3').src = "img/" + cardback + ".png";
            if(i == 4) document.getElementById('e4').src = "img/" + cardback + ".png";
            if(i == 5) document.getElementById('e5').src = "img/" + cardback + ".png";
            if(i == 6) document.getElementById('e6').src = "img/" + cardback + ".png";
        }
        function insert (i, n) { //在玩家手牌第i个的位置插入第n张卡牌
            if(i == 1) document.getElementById('c1').src = "img/" + ("" + n) + ".png";
            if(i == 2) document.getElementById('c2').src = "img/" + ("" + n) + ".png";
            if(i == 3) document.getElementById('c3').src = "img/" + ("" + n) + ".png";
            if(i == 4) document.getElementById('c4').src = "img/" + ("" + n) + ".png";
            if(i == 5) document.getElementById('c5').src = "img/" + ("" + n) + ".png";
            if(i == 6) document.getElementById('c6').src = "img/" + ("" + n) + ".png";
            for (var x = 1; x < 10; x+=1) {
                setTimeout(function () {
                    if(i == 1) document.getElementById('c1').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 0." + (x + "") + ";";
                    if(i == 2) document.getElementById('c2').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 0." + (x + "") + ";";
                    if(i == 3) document.getElementById('c3').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 0." + (x + "") + ";";
                    if(i == 4) document.getElementById('c4').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 0." + (x + "") + ";";
                    if(i == 5) document.getElementById('c5').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 0." + (x + "") + ";";
                    if(i == 6) document.getElementById('c6').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 0." + (x + "") + ";";
                }, x * 50);
            }
            setTimeout(function () {
                if(i == 1) document.getElementById('c1').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 1.0" + ";";
                if(i == 2) document.getElementById('c2').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 1.0" + ";";
                if(i == 3) document.getElementById('c3').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 1.0" + ";";
                if(i == 4) document.getElementById('c4').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 1.0" + ";";
                if(i == 5) document.getElementById('c5').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 1.0" + ";";
                if(i == 6) document.getElementById('c6').style = "transition-property: all; transition-timing-function: ease; transition-duration: 0.5s; opacity: 1.0" + ";";
            }, 500);
        }
        function cins(i, n) {
            if(i == 1) document.getElementById('c1').src = "img/" + ("" + n) + ".png";
            if(i == 2) document.getElementById('c2').src = "img/" + ("" + n) + ".png";
            if(i == 3) document.getElementById('c3').src = "img/" + ("" + n) + ".png";
            if(i == 4) document.getElementById('c4').src = "img/" + ("" + n) + ".png";
            if(i == 5) document.getElementById('c5').src = "img/" + ("" + n) + ".png";
            if(i == 6) document.getElementById('c6').src = "img/" + ("" + n) + ".png";
        }
        function sxcard() {
            for(var i = 1; i <= 6; i++) cins(i, pcd[i]);
        }
        function washin(x,num) { //将x张第num个牌洗入你的牌库
            had[num] -= x;
            return;
        }
        function ewashin(x,num) { //将x张第num个牌洗入你的牌库
            ehad[num] -= x;
            return;
        }
        function randc () {
            var j = Math.floor(Math.random() * cards) + 1;
            return j;
        }
        function inc (num) {
            if(pcard == 6) return;
            pcard+=1;
            pcd[pcard] = num;
            insert(pcard, num);
        }
        function einc (num) {
            if(ecard == 6) return;
            ecard+=1;
            ecd[ecard] = num;
            eins(ecard, num);
        }
        function outc(n, f) {
            for(var i = 0; i < n; i+=1){
                var T = randc();
                while(had[T] == 2) had[T] = randc();
                had[T]+=1;
                if(f == 1) {
                    ewashin(1,T);
                }
            }
        }
        function eoutc(n, f) {
            for(var i = 0; i < n; i+=1){
                var T = randc();
                while(ehad[T] == 2) T = randc();
                ehad[T]+=1;
                if(f == 1) {
                    washin(1, T);
                }
            }
        }
        function bigger (h,w) { //大屏显示由小变大特效
            if(h >= 453) return;
            document.getElementById('big').height = h;
            document.getElementById('big').width = w;
            setTimeout(function () {
                bigger(h + 6, w + 4);
            }, 2);
        }
        function show(x) {
            if (x != 0) document.getElementById("c" + x.toString()).style = "transform:scaleX(1.1) scaleY(1.1); -webkit-transform:scaleX(1.1) scaleY(1.1); -moz-transform:scaleX(1.1) scaleY(1.1); animation-duration: .5s; animation-timing-function: ease;";
            else {
                document.getElementById("c1").style = "transform:scaleX(1) scaleY(1); -webkit-transform:scaleX(1) scaleY(1); -moz-transform:scaleX(1) scaleY(1);";
                document.getElementById("c2").style = "transform:scaleX(1) scaleY(1); -webkit-transform:scaleX(1) scaleY(1); -moz-transform:scaleX(1) scaleY(1);";
                document.getElementById("c3").style = "transform:scaleX(1) scaleY(1); -webkit-transform:scaleX(1) scaleY(1); -moz-transform:scaleX(1) scaleY(1);";
                document.getElementById("c4").style = "transform:scaleX(1) scaleY(1); -webkit-transform:scaleX(1) scaleY(1); -moz-transform:scaleX(1) scaleY(1);";
                document.getElementById("c5").style = "transform:scaleX(1) scaleY(1); -webkit-transform:scaleX(1) scaleY(1); -moz-transform:scaleX(1) scaleY(1);";
                document.getElementById("c6").style = "transform:scaleX(1) scaleY(1); -webkit-transform:scaleX(1) scaleY(1); -moz-transform:scaleX(1) scaleY(1);";
            }
            var tmp;
            if (x == 0) tmp = "img/0.png";
            if (x == 1) tmp = document.getElementById('c1').src;
            if (x == 2) tmp = document.getElementById('c2').src;
            if (x == 3) tmp = document.getElementById('c3').src;
            if (x == 4) tmp = document.getElementById('c4').src;
            if (x == 5) tmp = document.getElementById('c5').src;
            if (x == 6) tmp = document.getElementById('c6').src;
            document.getElementById('big').src = tmp;
            bigger(3, 2);
        }
        function empty() { //判断牌库是否空了
            for (var i = 1; i <= cards; i++) if(had[i] < 2) return false;
            return true;
        }
        function eempty() { //判断牌库是否空了
            for (var i = 1; i <= cards; i++) if(ehad[i] < 2) return false;
            return true;
        }
        function randcard() { //返回随机一张玩家手牌的下标
            return Math.floor(Math.random() * pcard) + 1;
        }
        function erandcard() {
            return Math.floor(Math.random() * ecard) + 1;
        }
        function getcard() { //摸一张牌
            if(pcard == 6) {
                alert("手牌满了"); //手牌满了，这里不想全抄ls
                return;
            }
            if(empty()){
                alert("牌库空了"); //牌库空了
                return;
            }
            pcard+=1;
            while(had[pcd[pcard]] == 2) {
                pcd[pcard] = Math.floor(Math.random() * cards) + 1;
            }
            had[pcd[pcard]] += 1;//记录
            insert(pcard, pcd[pcard]);
            return;
        }
        function eget() {
            if(ecard == 6) {
                return;
            }
            if(eempty()){
                return;
            }
            ecard+=1;
            while(ehad[ecd[ecard]] == 2) {
                ecd[ecard] = Math.floor(Math.random() * cards) + 1;
            }
            ehad[ecd[ecard]] += 1;//记录
            eins(ecard, pcd[pcard]);
            return;
        }
        function pop (pos) { //将第pos张卡牌从玩家手中移除
            if(pcard == 0 || pos > pcard) return;
            if(pos == 1) document.getElementById('c1').className = "non";
            if(pos == 2) document.getElementById('c2').className = "non";
            if(pos == 3) document.getElementById('c3').className = "non";
            if(pos == 4) document.getElementById('c4').className = "non";
            if(pos == 5) document.getElementById('c5').className = "non";
            if(pos == 6) document.getElementById('c6').className = "non";
            setTimeout(function () {
                if(pos == 1) document.getElementById('c1').className = "";
                if(pos == 2) document.getElementById('c2').className = "";
                if(pos == 3) document.getElementById('c3').className = "";
                if(pos == 4) document.getElementById('c4').className = "";
                if(pos == 5) document.getElementById('c5').className = "";
                if(pos == 6) document.getElementById('c6').className = "";
                sxcard();
            }, 400);
            for (var i = pos; i < pcard; i++) {
                pcd[i] = pcd[i + 1];
            }
            pcard-=1;
            pcd[pcard + 1] = 0;
        }
        function epop (pos) {
            if(ecard == 0 || pos > ecard) return;
            for (var i = pos; i < ecard; i++) {
                eins(i,ecd[i + 1]);
                ecd[i] = ecd[i + 1];
            }
            ecard-=1;
            ecd[ecard + 1] = 0;
            eins(ecard + 1, 0);
        }
        function fp () { //发牌
            for(var i = 1; i <= 4; i+=1){
                while(had[pcd[i]] == 2) pcd[i] = Math.floor(Math.random() * cards) + 1;//必须不重
                had[pcd[i]] += 1;//记录
                insert(i,pcd[i]);
            }
            for(var i = 1; i <= 4; i+=1){
                while(ehad[ecd[i]] == 2) ecd[i] = Math.floor(Math.random() * cards) + 1;//必须不重
                ehad[ecd[i]] += 1;//记录
                eins(i,ecd[i]);
            }
            document.getElementById('sp').style = "color: blue;";//改变手牌style为可看到，并且位置一定
            document.getElementById('d').innerHTML = diamonds;
        }
        function ismonk(num) {
            for(var i = 0; i < mnum; i++) if(monkeys[i] == num) return true;
            return false;
        }
        function acticard(num) {
            asum += pa[pcd[num]];
            bsum += pb[pcd[num]];
            document.getElementById('a').innerHTML = asum;
            document.getElementById('b').innerHTML = bsum;
            if(ismonk(pcd[num])) monk++;
            if(pcd[num] == 1){
                pop(num);
                if(Math.ceil(Math.random() * 10) == 2) {
                    pcard+=1;
                    pcd[pcard] = 1;
                    insert(pcard, 1);
                }
                return;
            }
            if(pcd[num] == 2){
                pop(num);
                washin(1, 2);
                return;
            }
            if(pcd[num] == 5){ //如果是仓王，则交换a，b
                pop(num);
                var tmp = asum;
                asum = bsum;
                bsum = tmp;
                document.getElementById('a').innerHTML = asum;
                document.getElementById('b').innerHTML = bsum;
                return;
            }
            if(pcd[num] == 6){
                pop(num);
                var ca = ecard;
                for(var i = 1; i <= ecard; i+=1){
                    if(ecd[i] == 3) {
                        epop(i);
                        break;
                    }
                }
                if(ecard == ca){
                    epop(erandcard());
                }
                return;
            }
            if(pcd[num] == 4){ //GDY有BUG
                pop(num);
                if(bsum < asum) {
                    asum -= 5;
                    document.getElementById('a').innerHTML = asum;
                    document.getElementById('b').innerHTML = bsum;
                }
                return;
            }
            if(pcd[num] == 7) { //如果是平行线，那么都取大者
                var x = Math.max(asum, bsum);
                asum = x;
                bsum = x;
                document.getElementById('a').innerHTML = asum;
                document.getElementById('b').innerHTML = bsum;
            }
            if(pcd[num] == 8){
                eoutc(2,1);
            }
            if(pcd[num] == 9){
                wm+=1;
            }
            if(pcd[num] == 11){ //如果是博学者，那么将没有吃饱的刘仓置入手牌
                pop(num);
                pcard+=1;
                insert(pcard, 2);
                pcd[pcard] = 2;
                return;
            }
            if(pcd[num] == 12) {
                pop(num);
                getcard();
                return;
            }
            if(pcd[num] == 13 && pcard > 3) {
                setTimeout(function () {
                    pop(num);
                    acticard(randcard());
                }, 600);
                return;
            }
            if(pcd[num] == 14){
                pop(num);
                pop(randcard());
                return;
            }
            if(pcd[num] == 15){
                pop(num);
                washin(1, 16);
                getcard();
                pop(randcard());
                return;
            }
            if(pcd[num] == 16){
                var x = Math.min(asum, bsum);
                asum = x;
                bsum = x;
                document.getElementById('a').innerHTML = asum;
                document.getElementById('b').innerHTML = bsum;
            }
            if(pcd[num] == 17){
                pop(num);
                pop(randcard());
                var maxn = -1,maxi;
                for(var i = 1; i <= cards; i+=1) {
                    if(had[i] != 2 && maxn < cardcost[i]) {
                        maxn = cardcost[i];
                        maxi = i;
                    }
                }
                had[maxi]+=1;
                pcard+=1;
                insert(pcard, maxi);
                pcd[pcard] = maxi;
                return;
            }
            if(pcd[num] == 18){
                pop(num);
                while(pcard != 5 && !empty()) getcard();
                return;
            }
            if(pcd[num] == 19){
                document.getElementById('adra').style = "font-size: 450px; z-index: 888";
                clicks = 0;
                setTimeout(function () {
                    var tot = 0
                    if(clicks >= 8) tot+=1;
                    if(clicks >= 20) tot+=1;
                    if(clicks >= 42) tot+=1;
                    alert("获得了" + ("" + tot) + "点攻击力");
                    asum += tot;
                    document.getElementById('a').innerHTML = asum;
                    document.getElementById('adra').style = "display: none;";
                }, 5000);
            }
            if(pcd[num] == 20){
                for(var i = 1; i < monk; i++) {
                    asum += 3;
                    bsum += 3;
                }
                document.getElementById('a').innerHTML = asum;
                document.getElementById('b').innerHTML = bsum;
            }
            if(pcd[num] == 21){
                if(monk > 1) inc(21);
            }
            if(pcd[num] == 22){
                washin(2 * monk - 2, 24);
            }
            if(pcd[num] == 23){
                pop(num);
                while(pcard < 6 && !mempty()){
                    pcard+=1;
                    while(had[pcd[pcard]] == 2 || !ismonk(pcd[pcard])) {
                        pcd[pcard] = Math.floor(Math.random() * cards) + 1;
                    }
                    had[pcd[pcard]] += 1;//记录
                    insert(pcard, pcd[pcard]);
                }
                return;
            }
            pop(num);
        }
        function usecard (num) { //使用第num张手牌
            if(num > pcard) return; //如果该位置无牌直接跳出
            if(amt >= cardcost[pcd[num]]) {
                amt -= cardcost[pcd[num]]; //减去钻石
                document.getElementById('d').innerHTML = amt; //更新
                acticard(num);
            } else {
                alert("not enough diamond!");
            }
        }
        function eactivec (num) {
            easum += pa[ecd[num]];
            ebsum += pb[ecd[num]];
            var n = ecd[num];
            if(n == 1 && Math.ceil(Math.random() * 10) == 4) {
                epop(num);
                einc(1);
                return;
            }
            if(n == 2){
                epop(num);
                ewashin(1, 2);
                return;
            }
            if(n == 4 && easum > ebsum){
                epop(num);
                easum -= 5;
                return;
            }
            if(n == 5){
                epop(num);
                var tmp = easum;
                easum = ebsum;
                ebsum = tmp;
                return;
            }
            if(n == 6){
                epop(num);
                var ca = pcard;
                for(var i = 1; i <= pcard; i+=1){
                    if(pcd[i] == 3) {
                        pop(i);
                        break;
                    }
                }
                if(pcard == ca){
                    pop(randcard());
                }
                return;
            }   
            if(n == 7){
                var T = Math.max(easum, ebsum);
                easum = T;
                ebsum = T;
            }
            if(n == 8){
                outc(2, 1);
            }
            if(n == 9){
                ewm+=1;
            }
            if(n == 11){
                einc(2);
            }
            if(n == 12){
                eget();
            }
            if(n == 14){
                epop(num);
                epop(erandcard());
                return;
            }
            if(n == 17){
                epop(num);
                epop(erandcard());
                var maxi = 0;
                for(var i = 1; i <= cards; i+=1){
                    if(cardcost[i] > cardcost[maxi] && ehad[i] < 2) maxi = i;
                }
                ehad[maxi]+=1;
                einc(maxi);
                return;
            }
            epop(num);
        }
        function eusecard (num) {
            emt -= cardcost[ecd[num]];
            eactivec(num);
            document.getElementById('ea').innerHTML = easum;
            document.getElementById('eb').innerHTML = ebsum;
        }
        document.getElementById('skip').onclick = function () { //跳过回合
            document.getElementById('skip').style = "display: none;";
            emt = diamonds - wm;
            eget();
            for(var i = 1; i <= ecard; i+=1){
                if(emt >= cardcost[ecd[i]]) {
                    alert("对方使用了" + names[ecd[i]] + ",并获得+" + ("" + pa[ecd[i]]) + "+" + ("" + pb[ecd[i]]) + ",对手还剩" + ("" + (emt - cardcost[ecd[i]])) + "颗钻石");
                    eusecard(i);
                    i -= 1;
                }
            }
            document.getElementById('skip').style = "";
            if(easum > bsum){
                pbl-=kx;
            }
            if(asum > ebsum){
                ebl-=kx;
            }
            if(diamonds == 10) {
                document.getElementById('blarea').style = "color: red;";
                kx = 2;
            }
            document.getElementById('bl').innerHTML = pbl;
            document.getElementById('obl').innerHTML = ebl;
            if(pbl <= 0 && ebl <= 0) {
                pbl += 2;
                ebl += 2;
            }
            if(pbl <= 0) {
                alert("你输了");
                document.getElementById('pictureb').style = "position: absolute; top: 0px; z-index: 99999;";
                document.getElementById('pictureb').src = "img/lose.gif";
                setTimeout(function () {
                    window.location.href = "index.html";
                }, 5000);
            }
            if(ebl <= 0) {
                alert("你赢了");
                document.getElementById('pictureb').style = "position: absolute; top: 0px; z-index: 99999;";
                document.getElementById('pictureb').src = "img/win.gif";
                setTimeout(function () {
                    window.location.href = "index.html";
                }, 5000);
            }
            easum = 0;
            ebsum = 0;
            diamonds+=1;
            amt = diamonds - ewm;
            document.getElementById('d').innerHTML = amt;
            getcard();
            asum = 0;
            wm = 0;
            monk = 0;
            ewm = 0;
            bsum = 0;
//          document.getElementById('a').innerHTML = 0;
//          document.getElementById('b').innerHTML = 0;
//          document.getElementById('ea').innerHTML = 0;
//          document.getElementById('eb').innerHTML = 0;
        }
        document.getElementById('c1').onclick = function () {
            usecard(1);
        }
        document.getElementById('c2').onclick = function () {
            usecard(2);
        }
        document.getElementById('c3').onclick = function () {
            usecard(3);
        }
        document.getElementById('c4').onclick = function () {
            usecard(4);
        }
        document.getElementById('c5').onclick = function () {
            usecard(5);
        }
        document.getElementById('c6').onclick = function () {
            usecard(6);
        }
        function updown (a,uod) {//logo漂浮递归函数
            document.getElementById('pic').style = "position: absolute; left: 600px; z-index: 1; top: " + ("" + a) + "px;";
            setTimeout(function () {
                if(stat == 1) {
                    document.getElementById('pic').style = "display: none;";
                    return;
                }
                var tmp = a;
                a += uod;
                if(a == 219) updown(220, 1);
                else if(a == 241) updown(240, -1);
                else updown(a, uod);
            }, 25);
        }
        updown(230, 1);
        function szt (degr) { //扇子turn
            if(degr == 180) {
                document.getElementById('sz').style = "display: none;";
                fp();
                return;
            }
            if(degr == 0) stat = 1;
            document.getElementById('sz').style = "z-index: 3; position: absolute; left: -250px; top: -76px; transform: rotate(" + ("" + degr) + "deg);";
            setTimeout(function () {
                szt(degr + 1);
            }, 2);
        }
        document.getElementById('start').onclick = function () {
            document.getElementById('tit').style = "display:none;";
            document.getElementById('obl').innerHTML = ebl;
            szt(-180);
        }
        document.getElementById('fstart').onclick = function () {
            ebl = 18;
            document.getElementById('start').onclick();
        }
    </script>
</body>
</html>